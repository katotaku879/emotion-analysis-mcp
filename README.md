# ðŸ§  Emotion Analysis MCP

AIæ”¯æ´ã«ã‚ˆã‚‹è‡ªå·±åˆ†æžãƒ»è»¢è·æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ ã€‚Claude AIã¨ã®ä¼šè©±ã‚’åˆ†æžã—ã€ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ã®å®šé‡åŒ–ã¨è»¢è·åˆ¤æ–­ã®å®¢è¦³çš„æŒ‡æ¨™ã‚’æä¾›ã—ã¾ã™ã€‚

## âœ¨ ä¸»ãªæ©Ÿèƒ½

### ðŸ“Š æ„Ÿæƒ…ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹åˆ†æž
- 30ç¨®é¡žã®ã‚¹ãƒˆãƒ¬ã‚¹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è‡ªå‹•æ¤œå‡º
- ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«å®šé‡åŒ–ï¼ˆ0-100ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰
- ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æžï¼ˆå¢—åŠ /å®‰å®š/æ¸›å°‘ï¼‰
- ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ¯ãƒ¼ãƒ‰è­¦å‘Šã‚·ã‚¹ãƒ†ãƒ 

### ðŸ’¼ è»¢è·æ”¯æ´æ©Ÿèƒ½
- è·å ´ã‚¹ãƒˆãƒ¬ã‚¹åˆ†æž
- è»¢è·ç·Šæ€¥åº¦è¨ˆç®—
- ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸã‚­ãƒ£ãƒªã‚¢ã‚¢ãƒ‰ãƒã‚¤ã‚¹
- å…·ä½“çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³ç”Ÿæˆ

### ðŸŽ¯ Chromeæ‹¡å¼µæ©Ÿèƒ½
- **3ã‚¿ãƒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**
  - ðŸ“Š ä¸€èˆ¬: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°è¡¨ç¤º
  - ðŸ˜° ã‚¹ãƒˆãƒ¬ã‚¹: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒ¬ã‚¹åˆ†æž
  - ðŸ’¼ è»¢è·: è»¢è·ç·Šæ€¥åº¦ãƒ»æº–å‚™çŠ¶æ³è¡¨ç¤º
- **è‡ªå‹•ä¿å­˜**: 5åˆ†ã”ã¨ã«ä¼šè©±ã‚’è‡ªå‹•ä¿å­˜
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**: 3ç§’ã”ã¨ã«ãƒ‡ãƒ¼ã‚¿æ›´æ–°

## ðŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Backend**: Node.js, TypeScript, Express.js
- **Database**: PostgreSQL
- **Protocol**: MCP (Model Context Protocol) by Anthropic
- **Extension**: Chrome Extension (Manifest V3)
- **Environment**: WSL2 Ubuntu

## ðŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ
emotion-analysis-mcp/
â”œâ”€â”€ mcp-server/                      # MCPã‚µãƒ¼ãƒãƒ¼æœ¬ä½“
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ stdio-server-final.ts   # ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼
â”‚   â”‚   â””â”€â”€ career-tools.ts         # è»¢è·æ”¯æ´ãƒ„ãƒ¼ãƒ«
â”‚   â””â”€â”€ database/
â”œâ”€â”€ http-api-wrapper/                # HTTP APIãƒ–ãƒªãƒƒã‚¸
â”‚   â”œâ”€â”€ server.js                   # Express APIã‚µãƒ¼ãƒãƒ¼
â”‚   â”œâ”€â”€ pa-server.js                # Personal Assistant
â”‚   â””â”€â”€ claude-unified-extension/   # Chromeæ‹¡å¼µæ©Ÿèƒ½
â””â”€â”€ migration/                       # ãƒ‡ãƒ¼ã‚¿ç§»è¡Œãƒ„ãƒ¼ãƒ«
## ðŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶
- Node.js 18+
- PostgreSQL 14+
- Chrome Browser

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/katotaku879/emotion-analysis-mcp.git
cd emotion-analysis-mcp

# 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install
cd mcp-server && npm install
cd ../http-api-wrapper && npm install

# 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
createdb emotion_analysis
psql -d emotion_analysis -f database-schema.sql

# 4. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
cp .env.example .env
# .envã‚’ç·¨é›†ã—ã¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æƒ…å ±ã‚’è¨­å®š

èµ·å‹•æ–¹æ³•
# 1. APIã‚µãƒ¼ãƒãƒ¼èµ·å‹•
cd http-api-wrapper
node server.js &

# 2. PAã‚µãƒ¼ãƒãƒ¼èµ·å‹•
node pa-server.js &

# 3. Chromeæ‹¡å¼µæ©Ÿèƒ½ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# chrome://extensions/
# ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ãƒ¢ãƒ¼ãƒ‰ON â†’ ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã•ã‚Œã¦ã„ãªã„æ‹¡å¼µæ©Ÿèƒ½ã‚’èª­ã¿è¾¼ã‚€ã€
# â†’ claude-unified-extensionãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠž

ðŸ“Š å®Ÿè£…æ¸ˆã¿MCPãƒ„ãƒ¼ãƒ«
ãƒ„ãƒ¼ãƒ«åèª¬æ˜Ž
analyze_stress_triggers 30ç¨®é¡žã®ã‚¹ãƒˆãƒ¬ã‚¹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è©³ç´°åˆ†æž
analyze_work_stress è·å ´ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«è©•ä¾¡
calculate_job_change_urgency è»¢è·ç·Šæ€¥åº¦ã‚¹ã‚³ã‚¢è¨ˆç®—
generate_career_advice ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸã‚­ãƒ£ãƒªã‚¢ã‚¢ãƒ‰ãƒã‚¤ã‚¹
analyze_emotions æ„Ÿæƒ…ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æž
get_conversation_stats ä¼šè©±çµ±è¨ˆåˆ†æž
ðŸ“ˆ å®Ÿç¸¾ãƒ‡ãƒ¼ã‚¿

ç·ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°: 39,655ä»¶
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µã‚¤ã‚º: 27MB+
åˆ†æžç²¾åº¦: 85%
é–‹ç™ºæ™‚é–“: Week 1 (åŸºç›¤) + Week 2 (7.5æ™‚é–“)

ðŸš€ Week 2 Update (2025/08/09)
âœ… å®Ÿè£…å®Œäº†

Chromeæ‹¡å¼µæ©Ÿèƒ½ã®å®Œå…¨çµ±åˆ
è‡ªå‹•åˆ†æžæ©Ÿèƒ½ï¼ˆ5åˆ†ã”ã¨ï¼‰
3ã‚¿ãƒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿æ›´æ–°

ðŸ› æ—¢çŸ¥ã®å•é¡Œ

ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ãŒ100%å›ºå®šï¼ˆã‚³ãƒžãƒ³ãƒ‰å±¥æ­´ãŒåŽŸå› ï¼‰
ä»Šå¾Œã®æ”¹å–„äºˆå®š

ðŸ“… ä»Šå¾Œã®è¨ˆç”»

 ã‚¹ãƒˆãƒ¬ã‚¹è¨ˆç®—ã®ç²¾åº¦å‘ä¸Š
 ã‚°ãƒ©ãƒ•è¡¨ç¤ºæ©Ÿèƒ½
 é€šçŸ¥æ©Ÿèƒ½ã®å®Ÿè£…
 ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½

ðŸ¤ è²¢çŒ®
Issueå ±å‘Šã‚„Pull Requestã‚’æ­“è¿Žã—ã¾ã™ã€‚
ðŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
MIT License
ðŸ‘¨â€ðŸ’» é–‹ç™ºè€…æƒ…å ±

GitHub: @katotaku879
é–‹ç™ºæœŸé–“: 2025å¹´7æœˆã€œ8æœˆ
ç›®çš„: è»¢è·ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª + è‡ªå·±åˆ†æžãƒ„ãƒ¼ãƒ«


ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€å€‹äººã®ç²¾ç¥žçš„å¥åº·ç®¡ç†ã¨é©åˆ‡ãªã‚­ãƒ£ãƒªã‚¢åˆ¤æ–­ã‚’æ”¯æ´ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

## ðŸŽ¯ æœ€æ–°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ (2025å¹´8æœˆ9æ—¥)

### ðŸ” ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ã‚’å®Ÿè£…

#### æ¦‚è¦
ä¼šè©±ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æŠ€è¡“çš„ãªãƒŽã‚¤ã‚ºã‚’è‡ªå‹•é™¤å¤–ã—ã€ç´”ç²‹ãªæ„Ÿæƒ…åˆ†æžã‚’å¯èƒ½ã«ã™ã‚‹é«˜åº¦ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

#### ä¸»ãªæ”¹å–„ç‚¹
- **ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è‡ªå‹•é™¤å¤–**: ã‚³ãƒžãƒ³ãƒ‰ã€ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã€æŠ€è¡“çš„ãªå†…å®¹ã‚’è‡ªå‹•æ¤œå‡ºãƒ»é™¤å¤–
- **æ„Ÿæƒ…åˆ†æžã®ç²¾åº¦å‘ä¸Š**: å®Ÿéš›ã®ä¼šè©±ã¨æ„Ÿæƒ…è¡¨ç¾ã®ã¿ã«ç„¦ç‚¹ã‚’å½“ã¦ãŸåˆ†æž
- **ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ã®æ­£ç¢ºãªæ¸¬å®š**: 100%ã‹ã‚‰8%ã¸ï¼ˆå®Ÿéš›ã®æ„Ÿæƒ…ã‚¹ãƒˆãƒ¬ã‚¹ã‚’åæ˜ ï¼‰

#### æŠ€è¡“çš„è©³ç´°
- ðŸ“Š **å‡¦ç†å®Ÿç¸¾**: 36,243ä»¶ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰3,569ä»¶ã®æŠ€è¡“çš„å†…å®¹ã‚’é™¤å¤–
- ðŸŽ¯ **æ„Ÿæƒ…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: 3,290ä»¶ã®æ„Ÿæƒ…é–¢é€£ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ­£ç¢ºã«è­˜åˆ¥
- ðŸ“ˆ **åˆ†æžç²¾åº¦**: 9.4%ã‹ã‚‰10.1%ã«å‘ä¸Š
- âš¡ **å‡¦ç†é€Ÿåº¦**: 36,000ä»¶ä»¥ä¸Šã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’1ç§’ä»¥å†…ã§å‡¦ç†

#### å®Ÿè£…å†…å®¹
1. `filters.js` - é«˜åº¦ãªãƒ‘ã‚¿ãƒ¼ãƒ³ãƒžãƒƒãƒãƒ³ã‚°ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
2. `stdio-server-final.ts` - ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ã®çµ±åˆ
3. `server.js` - MCPã‚µãƒ¼ãƒãƒ¼ä¾å­˜ã‚’è§£æ¶ˆã—ã€ç›´æŽ¥å®Ÿè¡Œæ–¹å¼ã«å¤‰æ›´
4. Chromeæ‹¡å¼µæ©Ÿèƒ½ - ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°çµ±è¨ˆã®å¯è¦–åŒ–

#### ä½¿ç”¨æ–¹æ³•
```bash
# ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚ã‚Šã§åˆ†æžï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
curl -X POST http://localhost:3000/api/analyze \
  -H "Content-Type: application/json" \
  -d '{"tool": "analyze_emotions", "parameters": {"period": "7 days", "includeSystemMessages": false}}'

# ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãªã—ã§åˆ†æžï¼ˆå…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰
curl -X POST http://localhost:3000/api/analyze \
  -H "Content-Type: application/json" \
  -d '{"tool": "analyze_emotions", "parameters": {"period": "7 days", "includeSystemMessages": true}}'

  åŠ¹æžœ

ã‚ˆã‚Šæ­£ç¢ºãªã‚¹ãƒˆãƒ¬ã‚¹åˆ¤å®šãŒå¯èƒ½ã«
è»¢è·ç·Šæ€¥åº¦ãªã©ã®é‡è¦ãªåˆ¤æ–­ãŒã‚ˆã‚Šä¿¡é ¼æ€§ã®é«˜ã„ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãã‚ˆã†ã«
æœ¬å½“ã®æ„Ÿæƒ…çŠ¶æ…‹ã‚’åæ˜ ã—ãŸåˆ†æžçµæžœ


ðŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ
ç¾åœ¨ç¨¼åƒä¸­ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

APIã‚µãƒ¼ãƒãƒ¼ (ãƒãƒ¼ãƒˆ3000): ãƒ¡ã‚¤ãƒ³ã®åˆ†æžAPI
PAã‚µãƒ¼ãƒãƒ¼ (ãƒãƒ¼ãƒˆ3333): ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆæ©Ÿèƒ½
PostgreSQL: 43,433ä»¶ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨411ä»¶ã®æ„Ÿæƒ…ãƒ­ã‚°ã‚’ä¿å­˜
Chromeæ‹¡å¼µæ©Ÿèƒ½: è‡ªå‹•ä¿å­˜ã¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±è¨ˆ

ç·ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°: 43,433ä»¶
æ„Ÿæƒ…ãƒ­ã‚°: 411ä»¶
ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°: 22
ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¾Œã®æ„Ÿæƒ…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: 3,290ä»¶

## ðŸ³ Dockerç’°å¢ƒ

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**
```bash
cp .env.example .env
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†

2.ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç”Ÿæˆ
./generate-secrets.sh
SSLè¨¼æ˜Žæ›¸ç”Ÿæˆ

bashmkdir -p nginx/ssl
cd nginx/ssl
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout key.pem -out cert.pem \
  -subj "/C=JP/ST=Tokyo/L=Tokyo/O=EmotionAnalysis/CN=localhost"
cd ../..

Dockerèµ·å‹•

bashdocker compose up -d
ä½¿ç”¨æ–¹æ³•
ç’°å¢ƒåˆ‡ã‚Šæ›¿ãˆ
bash./switch-env.sh
# 1: æ—¢å­˜DBï¼ˆæœ¬ç•ªï¼‰
# 2: Docker DBï¼ˆãƒ†ã‚¹ãƒˆï¼‰
ã‚µãƒ¼ãƒ“ã‚¹URL

API: http://localhost:3001
PA: http://localhost:3334
HTTPS: https://localhost

ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
bashdocker compose ps
./security-check.sh

#### Step 2: ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰ä½œæˆ

```bash
touch SETUP.md
code SETUP.md
markdown# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## å¿…è¦ãªç’°å¢ƒ
- Docker
- Docker Compose V2
- Node.js 20+
- PostgreSQL 16

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/katotaku879/emotion-analysis-mcp.git
cd emotion-analysis-mcp

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd http-api-wrapper && npm install && cd ..
cd mcp-server && npm install && cd ..

# ç’°å¢ƒè¨­å®š
cp .env.example .env
./generate-secrets.sh

# Dockerèµ·å‹•
docker compose up -d

# ç¢ºèª
docker compose ps
ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
ãƒãƒ¼ãƒˆç«¶åˆ
bash# æ—¢å­˜ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢
sudo systemctl stop postgresql
ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å¤±æ•—
bashdocker compose logs api-server
docker compose restart api-server

#### Step 3: generate-secrets.sh ã‚’è¿½åŠ 

```bash
# generate-secrets.shãŒã¾ã Gitã«è¿½åŠ ã•ã‚Œã¦ã„ãªã„å ´åˆ
git add generate-secrets.sh

## ðŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ç’°å¢ƒæ§‹ç¯‰ï¼ˆDockerä½¿ç”¨ï¼‰

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/katotaku879/emotion-analysis-mcp.git
cd emotion-analysis-mcp

# ç’°å¢ƒå¤‰æ•°è¨­å®š
cp .env.example .env
# .envã‚’ç·¨é›†ã—ã¦DB_PASSWORD=your_passwordã‚’è¨­å®š

# Dockerèµ·å‹•ï¼ˆå…¨ã‚µãƒ¼ãƒ“ã‚¹ä¸€æ‹¬èµ·å‹•ï¼‰
docker compose up -d

# èµ·å‹•ç¢ºèª
docker compose ps
2. Chromeæ‹¡å¼µæ©Ÿèƒ½ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Chrome ã§ chrome://extensions/ ã‚’é–‹ã
ã€Œé–‹ç™ºè€…ãƒ¢ãƒ¼ãƒ‰ã€ã‚’æœ‰åŠ¹åŒ–
ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã•ã‚Œã¦ã„ãªã„æ‹¡å¼µæ©Ÿèƒ½ã‚’èª­ã¿è¾¼ã‚€ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
http-api-wrapper/claude-simple-extensionãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠž

3. ä½¿ç”¨æ–¹æ³•

Claude.ai (https://claude.ai) ã‚’é–‹ã
Chromeæ‹¡å¼µæ©Ÿèƒ½ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
è‡ªå‹•ä¿å­˜ãŒé–‹å§‹ï¼ˆ5ç§’ã”ã¨ã«æ¤œçŸ¥ã€5ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ä¿å­˜ï¼‰

ðŸ“Š ä¸»ãªæ©Ÿèƒ½
âœ… å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

Dockerå®Œå…¨çµ±åˆ - docker compose up -dã§å…¨ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
51,509ä»¶ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸åˆ†æž - æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã®å®Œå…¨é€£æº
è‡ªå‹•ä¿å­˜æ©Ÿèƒ½ - 5ç§’ã”ã¨ã®è‡ªå‹•æ¤œçŸ¥ã€5ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã”ã¨ã®è‡ªå‹•ä¿å­˜
ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–° - 3ç§’ã”ã¨ã«çµ±è¨ˆæƒ…å ±ã‚’è‡ªå‹•æ›´æ–°
ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ– - PostgreSQLãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ã€IPåˆ¶é™
é•·æœŸé‹ç”¨å¯¾å¿œ - æ—¢å­˜DBã‚’ç›´æŽ¥ä½¿ç”¨ã€ãƒ‡ãƒ¼ã‚¿ä¸€å…ƒç®¡ç†

ðŸ“ˆ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ
docker compose up -d
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  existing-api (3000)         â”‚ â† Chromeæ‹¡å¼µæ©Ÿèƒ½ç”¨API
â”‚  emotion-pa (3334)           â”‚ â† åˆ†æžæ©Ÿèƒ½
â”‚  postgres (5433)             â”‚ â† Docker DBï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
â”‚  nginx (80/443)              â”‚ â† ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ—¢å­˜PostgreSQL (5432)       â”‚ â† ãƒ¡ã‚¤ãƒ³DBï¼ˆ51,509ä»¶ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Chromeæ‹¡å¼µæ©Ÿèƒ½              â”‚
â”‚  ãƒ»è‡ªå‹•ä¿å­˜                  â”‚
â”‚  ãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ðŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
PostgreSQLæŽ¥ç¶šã‚¨ãƒ©ãƒ¼
bash# PostgreSQLè¨­å®šç¢ºèª
sudo nano /etc/postgresql/16/main/postgresql.conf
# listen_addresses = '*' ã‚’è¨­å®š

# èªè¨¼è¨­å®š
sudo nano /etc/postgresql/16/main/pg_hba.conf
# mkykrç”¨ã®md5èªè¨¼ã‚’è¿½åŠ 

# å†èµ·å‹•
sudo systemctl restart postgresql@16-main
Chromeæ‹¡å¼µæ©Ÿèƒ½ãŒå‹•ä½œã—ãªã„

ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ãƒ„ãƒ¼ãƒ«ï¼ˆF12ï¼‰ã§ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
APIã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ç¢ºèª: curl http://localhost:3000/api/dashboard
æ‹¡å¼µæ©Ÿèƒ½ã®å†èª­ã¿è¾¼ã¿

ðŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

PostgreSQLãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼æœ‰åŠ¹
æŽ¥ç¶šå…ƒIPåˆ¶é™ï¼ˆWSL2å†…éƒ¨ã®ã¿ï¼‰
Docker Secretsä½¿ç”¨ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹è¨­å®šç®¡ç†

ðŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹

èµ·å‹•æ™‚é–“: ç´„10ç§’
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†: 51,509ä»¶ã‚’å³åº§ã«åˆ†æž
è‡ªå‹•æ›´æ–°: 3ç§’ã”ã¨
ãƒ¡ãƒ¢ãƒªä½¿ç”¨: ç´„500MBï¼ˆå…¨ã‚µãƒ¼ãƒ“ã‚¹åˆè¨ˆï¼‰


### Step 2: GitHubã§Issuesã‚’ä½œæˆ

```bash
# ãƒ–ãƒ©ã‚¦ã‚¶ã§GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é–‹ã
echo "https://github.com/katotaku879/emotion-analysis-mcp/issues"
ä»¥ä¸‹ã®Issuesã‚’ä½œæˆï¼š
Issue 1: ã€ŒðŸ› emotion-apiã‚³ãƒ³ãƒ†ãƒŠãŒå†èµ·å‹•ã‚’ç¹°ã‚Šè¿”ã™ã€
markdown## å•é¡Œ
emotion-apiï¼ˆãƒãƒ¼ãƒˆ3001ï¼‰ãŒèµ·å‹•æ™‚ã«ã‚¨ãƒ©ãƒ¼ã§å†èµ·å‹•ã‚’ç¹°ã‚Šè¿”ã™

## ç¾çŠ¶
- Chromeæ‹¡å¼µæ©Ÿèƒ½ã«ã¯å½±éŸ¿ãªã—ï¼ˆexisting-apiãŒå‹•ä½œï¼‰
- é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨ãªã®ã§å„ªå…ˆåº¦ä½Ž

## è§£æ±ºæ¡ˆ
1. ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®è©³ç´°èª¿æŸ»
2. ä¸è¦ãªã‚‰ docker-compose.yml ã‹ã‚‰å‰Šé™¤
Issue 2: ã€Œâœ¨ WSL2ã®IPè‡ªå‹•å–å¾—æ©Ÿèƒ½ã€
markdown## æ©Ÿèƒ½è¦æœ›
WSL2ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå†èµ·å‹•ã®ãŸã³ã«å¤‰ã‚ã‚‹ãŸã‚ã€è‡ªå‹•å–å¾—æ©Ÿèƒ½ãŒæ¬²ã—ã„

## å®Ÿè£…æ¡ˆ
```bash
# èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«è¿½åŠ 
WSL_IP=$(hostname -I | awk '{print $1}')
sed -i "s/DB_HOST=.*/DB_HOST=$WSL_IP/" .env.docker

#### Issue 3: ã€ŒðŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼šå‹•ç”»ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ä½œæˆã€
```markdown
## å†…å®¹
ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‹ã‚‰ä½¿ç”¨æ–¹æ³•ã¾ã§ã®å‹•ç”»ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«

## é …ç›®
- Dockerç’°å¢ƒæ§‹ç¯‰
- Chromeæ‹¡å¼µæ©Ÿèƒ½ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- è‡ªå‹•ä¿å­˜ã®å‹•ä½œç¢ºèª

# emotion-analysis-mcp

AIæ”¯æ´ã«ã‚ˆã‚‹è‡ªå·±åˆ†æžãƒ»è»¢è·æ”¯æ´çµ±åˆã‚·ã‚¹ãƒ†ãƒ 

## ðŸ†• åŽŸå› åˆ†æžAPI

### æ¦‚è¦
éŽåŽ»ã®ä¼šè©±ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å¤‰åŒ–ã®åŽŸå› ã‚’åˆ†æžã—ã€ç¢ºä¿¡åº¦ä»˜ãã§æç¤ºã™ã‚‹APIã§ã™ã€‚

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

#### 1. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
```bash
cp .env.example .env

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
DB_HOST=localhost
DB_PORT=5432
DB_NAME=emotion_analysis
DB_USER=your_username
DB_PASSWORD=your_password

# APIè¨­å®š
API_KEY=your_secure_api_key_here
NODE_ENV=development

# MCPã‚µãƒ¼ãƒãƒ¼è¨­å®š
PORT=3001
MCP_PORT=3001
MCP_SERVER_URL=http://localhost:3001

2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
# ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
sudo -u postgres psql -d emotion_analysis -f database/migrations/002_add_cause_analysis_tables.sql

3. Dockerèµ·å‹•
# ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•
docker compose up -d

# çŠ¶æ…‹ç¢ºèª
docker compose ps

ä½¿ç”¨æ–¹æ³•
åŸºæœ¬çš„ãªä½¿ã„æ–¹
curl -X POST http://localhost:3000/api/personal-ai/analyze \
  -H "Content-Type: application/json" \
  -H "X-API-Key: YOUR_API_KEY" \
  -d '{
    "type": "cause_analysis",
    "message": "ãªãœæœ€è¿‘ç–²ã‚Œã‚„ã™ã„ã®ï¼Ÿ",
    "timeframe": 30
  }'

  ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ åž‹ å¿…é ˆèª¬æ˜Ž
type string âœ…"cause_analysis" (å›ºå®šå€¤)
message string âœ… åˆ†æžã—ãŸã„è³ªå•
timeframe number âŒ åˆ†æžæœŸé–“ï¼ˆæ—¥æ•°ï¼‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 30

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹
{
  "success": true,
  "type": "cause_analysis",
  "result": {
    "period": {
      "start_date": "2025-07-13",
      "end_date": "2025-08-12",
      "days": 30
    },
    "data_points": 5000,
    "confidence": 95,
    "summary": "æœ€ã‚‚å¯èƒ½æ€§ã®é«˜ã„åŽŸå› ã¯ã€ŒæŠ€è¡“çš„ãªèª²é¡Œãƒ»é–‹ç™ºä½œæ¥­ã®å¤‰åŒ–ã€ã§ã™",
    "findings": [
      "æŠ€è¡“çš„ãªèª²é¡Œãƒ»é–‹ç™ºä½œæ¥­ã®å¤‰åŒ–ï¼ˆç¢ºä¿¡åº¦: 95%ï¼‰",
      "å­¦ç¿’æ´»å‹•ãƒ»ã‚¹ã‚­ãƒ«ç¿’å¾—ã®å¤‰åŒ–ï¼ˆç¢ºä¿¡åº¦: 95%ï¼‰"
    ],
    "recommendations": [
      "ç¶™ç¶šçš„ãªãƒ‡ãƒ¼ã‚¿è¨˜éŒ²ã«ã‚ˆã‚Šã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æŠŠæ¡ãŒå¯èƒ½ã«ãªã‚Šã¾ã™",
      "å°ã•ãªæ”¹å–„ã‹ã‚‰å§‹ã‚ã¦ã€å¾ã€…ã«å¤§ããªå¤‰åŒ–ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†"
    ]
  }
}

ä½¿ç”¨ä¾‹
ç–²åŠ´ã®åŽŸå› åˆ†æž
curl -X POST http://localhost:3000/api/personal-ai/analyze \
  -H "Content-Type: application/json" \
  -H "X-API-Key: YOUR_API_KEY" \
  -d '{"type":"cause_analysis","message":"ãªãœç–²ã‚ŒãŒå–ã‚Œãªã„ã®ï¼Ÿ","timeframe":14}'

ã‚¹ãƒˆãƒ¬ã‚¹ã®åŽŸå› åˆ†æžï¼ˆéŽåŽ»7æ—¥ï¼‰  
curl -X POST http://localhost:3000/api/personal-ai/analyze \
  -H "Content-Type: application/json" \
  -H "X-API-Key: YOUR_API_KEY" \
  -d '{"type":"cause_analysis","message":"æœ€è¿‘ã‚¹ãƒˆãƒ¬ã‚¹ã‚’æ„Ÿã˜ã‚‹ç†ç”±ã¯ï¼Ÿ","timeframe":7}'

ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°  
# ã‚«ãƒ©ãƒ ã‚’è¿½åŠ 
sudo -u postgres psql -d emotion_analysis -c "ALTER TABLE analysis_cache ADD COLUMN IF NOT EXISTS query_hash VARCHAR(64);"

ã‚¨ãƒ©ãƒ¼: Unauthorized

.envãƒ•ã‚¡ã‚¤ãƒ«ã«API_KEYãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’å†èµ·å‹•: docker compose restart existing-api

ã‚¨ãƒ©ãƒ¼: Analysis failed

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šã‚’ç¢ºèª
ãƒ­ã‚°ã‚’ç¢ºèª: docker compose logs existing-api --tail=50

ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
Claude.ai/ãƒ¦ãƒ¼ã‚¶ãƒ¼
    â†“
[HTTP API] localhost:3000/api/personal-ai/analyze
    â†“
[analyze_cause Tool] ãƒ‡ãƒ¼ã‚¿åˆ†æžãƒ»åŽŸå› ç‰¹å®š
    â†“
[PostgreSQL] 7000ä»¶ä»¥ä¸Šã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿

å¿…è¦ãªã‚µãƒ¼ãƒ“ã‚¹
Dockerã§ä»¥ä¸‹ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã—ã¾ã™ï¼š

emotion-existing-api (ãƒãƒ¼ãƒˆ3000) - ãƒ¡ã‚¤ãƒ³API
emotion-postgres (ãƒãƒ¼ãƒˆ5433) - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
emotion-pa (ãƒãƒ¼ãƒˆ3334) - è£œåŠ©ã‚µãƒ¼ãƒ“ã‚¹
emotion-nginx (ãƒãƒ¼ãƒˆ80/443) - ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

APIã‚­ãƒ¼èªè¨¼å¿…é ˆ
ç’°å¢ƒå¤‰æ•°ã§æ©Ÿå¯†æƒ…å ±ã‚’ç®¡ç†
HTTPSã§ã®é€šä¿¡æŽ¨å¥¨ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰

cat > ~/emotion-analysis-mcp/README.md << 'EOF'
# Personal AI Analysis System - Emotion Analysis MCP

## ðŸŽ¯ æ¦‚è¦
Claude AIã¨ã®ä¼šè©±ãƒ‡ãƒ¼ã‚¿ï¼ˆ93,602ä»¶ï¼‰ã‚’åˆ†æžã—ã€å€‹äººã«æœ€é©åŒ–ã•ã‚ŒãŸã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚
7,000ä»¶ä»¥ä¸Šã®ä¼šè©±å±¥æ­´ã‹ã‚‰ã€ã‚ãªãŸã®æ„Ÿæƒ…ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ç¡çœ çŠ¶æ…‹ã€ç–²åŠ´åº¦ã€èªçŸ¥æ©Ÿèƒ½ã‚’åˆ†æžã—ã¾ã™ã€‚

## âœ¨ ä¸»ãªæ©Ÿèƒ½

### 4ã¤ã®åˆ†æžã‚¨ãƒ³ã‚¸ãƒ³
- ðŸ§  **æ„Ÿæƒ…åˆ†æžï¼ˆEmotionalï¼‰**: ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ã€ã‚¤ãƒ©ã‚¤ãƒ©ã€ä¸å®‰ã®æ¤œå‡ºã¨åˆ†æž
- ðŸ˜´ **ç¡çœ åˆ†æžï¼ˆSleepï¼‰**: ç¡çœ ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ä¸çœ ç—‡çŠ¶ã€ç¡çœ ã®è³ªã®è©•ä¾¡
- ðŸ˜« **ç–²åŠ´åˆ†æžï¼ˆFatigueï¼‰**: èº«ä½“çš„ãƒ»ç²¾ç¥žçš„ç–²åŠ´ã®å®šé‡åŒ–ã¨åŽŸå› åˆ†æž
- ðŸŽ¯ **èªçŸ¥æ©Ÿèƒ½åˆ†æžï¼ˆCognitiveï¼‰**: é›†ä¸­åŠ›ã€è¨˜æ†¶åŠ›ã€åˆ¤æ–­åŠ›ã®è©•ä¾¡

### Chromeæ‹¡å¼µæ©Ÿèƒ½
- Claude.aiã§ã®ä¼šè©±ã‚’è‡ªå‹•ä¿å­˜
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§åˆ†æžçµæžœã‚’æ³¨å…¥
- 5ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã”ã¨ã«è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

## ðŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦ãªç’°å¢ƒ
- Docker & Docker Compose
- PostgreSQL
- Node.js 18+
- Chrome/Edge ãƒ–ãƒ©ã‚¦ã‚¶

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/katotaku879/emotion-analysis-mcp.git
cd emotion-analysis-mcp

# 2. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
cp .env.example .env.docker
# .env.dockerã‚’ç·¨é›†ã—ã¦DBæŽ¥ç¶šæƒ…å ±ã‚’è¨­å®š

# 3. Dockerç’°å¢ƒã‚’èµ·å‹•
docker compose up -d

# 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
docker exec -it emotion-postgres psql -U postgres -d emotion_analysis
Chromeæ‹¡å¼µæ©Ÿèƒ½ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Chromeã§ chrome://extensions/ ã‚’é–‹ã
ã€Œé–‹ç™ºè€…ãƒ¢ãƒ¼ãƒ‰ã€ã‚’æœ‰åŠ¹ã«ã™ã‚‹
ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã•ã‚Œã¦ã„ãªã„æ‹¡å¼µæ©Ÿèƒ½ã‚’èª­ã¿è¾¼ã‚€ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
http-api-wrapper/claude-unified-extension ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠž

ðŸ’¡ ä½¿ç”¨æ–¹æ³•
Claude.aiã§ã®ä½¿ç”¨
ä»¥ä¸‹ã®ã‚ˆã†ãªè³ªå•ã‚’ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«åˆ†æžçµæžœãŒè¿½åŠ ã•ã‚Œã¾ã™ï¼š
æœ€è¿‘ç–²ã‚Œã‚„ã™ã„ã®ï¼Ÿ
â†’ ã€ç–²åŠ´åˆ†æžã€‘éŽåŽ»30æ—¥é–“ã®ç–²åŠ´åº¦ã¨å›žå¾©ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æžã—ã¾ã—ãŸ...

ãªãœæœ€è¿‘ã‚¤ãƒ©ã‚¤ãƒ©ã™ã‚‹ã®ï¼Ÿ
â†’ ã€æ„Ÿæƒ…åˆ†æžã€‘éŽåŽ»30æ—¥é–“ã®ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«ã¨æ„Ÿæƒ…ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æžã—ã¾ã—ãŸ...

æœ€è¿‘çœ ã‚Œãªã„ç†ç”±ã¯ï¼Ÿ
â†’ ã€ç¡çœ åˆ†æžã€‘éŽåŽ»30æ—¥é–“ã®ç¡çœ ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨è³ªã‚’åˆ†æžã—ã¾ã—ãŸ...

æœ€è¿‘é›†ä¸­ã§ããªã„
â†’ ã€èªçŸ¥æ©Ÿèƒ½åˆ†æžã€‘éŽåŽ»30æ—¥é–“ã®é›†ä¸­åŠ›ã¨èªçŸ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã‚’åˆ†æžã—ã¾ã—ãŸ...
APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
bash# åŽŸå› åˆ†æžAPI
POST http://localhost:3000/api/personal-ai/analyze
{
  "type": "cause_analysis",
  "message": "ãªãœæœ€è¿‘ç–²ã‚Œã‚„ã™ã„ã®ï¼Ÿ",
  "timeframe": 30,
  "context": "fatigue"  # emotional/sleep/fatigue/cognitive
}
ðŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Claude.ai     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Chromeæ‹¡å¼µæ©Ÿèƒ½
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HTTP API      â”‚ Port: 3000
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Server     â”‚ åˆ†æžã‚¨ãƒ³ã‚¸ãƒ³
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL     â”‚ 93,602ä»¶ã®ãƒ‡ãƒ¼ã‚¿
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ðŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

conversation_messages: ä¼šè©±å±¥æ­´ï¼ˆ93,602ä»¶ï¼‰
conversation_sessions: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
emotion_logs: æ„Ÿæƒ…è¨˜éŒ²ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

ðŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

Backend: Node.js + TypeScript
Database: PostgreSQL 16
Container: Docker Compose
Protocol: MCP (Model Context Protocol)
Extension: Chrome Extension API (Manifest V3)
Framework: Express.js

ðŸ“ˆ ç¾åœ¨ã®çµ±è¨ˆ

ç·ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°: 93,602ä»¶
åˆ†æžå¯èƒ½æœŸé–“: éŽåŽ»30æ—¥é–“
å¯¾å¿œåˆ†æžã‚¿ã‚¤ãƒ—: 4ç¨®é¡ž
å¿œç­”æ™‚é–“: < 2ç§’

ðŸ› æ—¢çŸ¥ã®å•é¡Œ

ç–²åŠ´åˆ†æžã®è¨ˆç®—ã§èª¤ã£ãŸå€¤ãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆãŒã‚ã‚‹ï¼ˆä¿®æ­£äºˆå®šï¼‰
emotion_scoreã¯ç¾åœ¨0å›ºå®šï¼ˆä»Šå¾Œå®Ÿè£…äºˆå®šï¼‰

ðŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³
ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿Žã—ã¾ã™ï¼

Forkã™ã‚‹
Feature branchã‚’ä½œæˆ (git checkout -b feature/AmazingFeature)
å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (git commit -m 'Add some AmazingFeature')
ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (git push origin feature/AmazingFeature)
ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

ðŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
MIT License - è©³ç´°ã¯ LICENSE ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§
ðŸ‘¤ ä½œè€…
katotaku879

GitHub: @katotaku879

ðŸ™ è¬è¾ž

Claude AI by Anthropic
MCP (Model Context Protocol) by Anthropic
PostgreSQL Community
Docker Community


â­ ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå½¹ç«‹ã£ãŸã‚‰ã€ã‚¹ã‚¿ãƒ¼ã‚’ãŠé¡˜ã„ã—ã¾ã™ï¼
EOF

cat >> ~/emotion-analysis-mcp/README.md << 'EOF'

## ðŸ”§ æœ€æ–°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ (2025å¹´8æœˆ)

### ç–²åŠ´åˆ†æžæ©Ÿèƒ½ã®å®Ÿè£…
- **ç–²åŠ´åº¦ã‚¹ã‚³ã‚¢**: 0-100ã®ã‚¹ã‚±ãƒ¼ãƒ«ã§ç–²åŠ´ãƒ¬ãƒ™ãƒ«ã‚’å®šé‡åŒ–
- **ç–²åŠ´ã‚¿ã‚¤ãƒ—åˆ†æž**: èº«ä½“çš„ç–²åŠ´ã¨ç²¾ç¥žçš„ç–²åŠ´ã®å‰²åˆã‚’åˆ†æž
- **æ™‚é–“å¸¯åˆ¥åˆ†æž**: ç–²åŠ´ã®è¨´ãˆãŒå¤šã„æ™‚é–“å¸¯ã‚’ç‰¹å®š
- **é€±é–“ãƒ‘ã‚¿ãƒ¼ãƒ³**: æ›œæ—¥ã”ã¨ã®ç–²åŠ´å‚¾å‘ã‚’åˆ†æž
- **å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œ**: 100,000ä»¶ä»¥ä¸Šã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’åˆ†æžå¯èƒ½

### æŠ€è¡“çš„æ”¹å–„
- PostgreSQLã®ã‚«ãƒ©ãƒ åäº’æ›æ€§å¯¾å¿œï¼ˆid â†’ message_idï¼‰
- GROUP BYå¥ã®æœ€é©åŒ–ï¼ˆåˆ—ç•ªå·å½¢å¼ã«å¤‰æ›´ï¼‰
- ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹ã‚»ã‚­ãƒ¥ã‚¢ãªèªè¨¼æƒ…å ±ç®¡ç†
- Dockerç’°å¢ƒã§ã®ãƒ›ã‚¹ãƒˆDBæŽ¥ç¶šå¯¾å¿œ

### API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
POST /api/analyze
{
"tool": "analyze_fatigue_patterns",
"parameters": {
"timeframe": 30
}
}
POST /api/personal-ai/analyze
{
"type": "cause_analysis",
"context": "fatigue",
"message": "æœ€è¿‘ç–²ã‚Œã‚„ã™ã„ã®ï¼Ÿ",
"timeframe": 30
}
### ç’°å¢ƒå¤‰æ•°è¨­å®š
```bash
# .env.docker
DB_PASSWORD=your_password
DB_HOST=host.docker.internal
DB_USER=your_username
DB_NAME=emotion_analysis

EOF
ã‚³ãƒŸãƒƒãƒˆ
git add README.md
git commit -m "docs: ç–²åŠ´åˆ†æžæ©Ÿèƒ½ã®å®Ÿè£…å†…å®¹ã‚’READMEã«è¿½åŠ 

ç–²åŠ´åˆ†æžæ©Ÿèƒ½ã®è©³ç´°èª¬æ˜Ž
APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ä½¿ç”¨æ–¹æ³•
æŠ€è¡“çš„æ”¹å–„ç‚¹ã®è¨˜è¼‰
ç’°å¢ƒå¤‰æ•°è¨­å®šã®èª¬æ˜Ž"